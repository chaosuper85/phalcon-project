define("common/module/upload/upload",function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),a=e("common/module/util/util"),i=function(){function e(n){var t=this;return o(this,e),window.File&&window.FileReader&&window.FormData?(this.opt=n,void a.bind(document.querySelectorAll(n.target),"change",function(e){var n=e.target.files[0];n&&(/^image\//i.test(n.type),t.readFile(n))})):void alert("浏览器不支持上传文件，请用最新版本chrome")}return r(e,[{key:"readFile",value:function(e){var n=this,t=new FileReader;t.onloadend=function(){n.processFile(t.result,e.type)},t.onerror=function(){alert("读取文件失败!")},t.readAsDataURL(e)}},{key:"processFile",value:function(e){this.sendFile(e)}},{key:"sendFile",value:function(e){var n=new FormData,t=this;n.append("drivers",e),console.log(n),$.ajax({type:"POST",url:t.opt.url,data:n,dataType:"json",contentType:!1,processData:!1,success:function(e){t.opt.uploadSuccess&&t.opt.uploadSuccess(e)},error:function(){alert("上传出错!")}})}}]),e}();t.exports=i});