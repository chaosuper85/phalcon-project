define("order/module/commonBox",function(e,r,s){function t(e){var r,s=e.scope||$("body");r="object"==typeof e.config_array?e.config_array:[];for(var t={},a=r.length,v=0;a>v;v++){var d=r[v],u=d.keyName||"",g=d.selector||"",m=d.require,p=d.type||"",f=d.selectPlaceholder||"";selectOptions=d.selectOptions||[],height=d.height||30,t[u]={},function(e,r,o,a,v){(a===h.input_type||a===h.weight_type)&&(t[e].$=$(s).find(r),t[e].require=o,t[e].type=a),a===h.select_type&&(t[e].$=new l({container:$(s).find(r),width:500,height:v,options:selectOptions,placeholder:f,onSelectChange:function(e,r,s){s.select.select_box.removeClass("error");var t=i(s.select.select_box);t.error.hide(),c.isNull(e)?t.right.hide():t.right.show()}}),t[e].require=o,t[e].type=a),a===h.address_select_type&&(t[e].$=new n({wrap:r,width:145,level:3,height:v,text_align:"center",onProvinceSelectChange:function(e,r,s){e&&s.province.select.select_box.removeClass("error")},onCitySelectChange:function(e,r,s){e&&s.city.select.select_box.removeClass("error")},onAreaSelectChange:function(e,r,s){if(e){s.area.select.select_box.removeClass("error");var t=i(s.area.select.select_box);t.error.hide(),t.right.show()}}}),t[e].require=o,t[e].type=a)}(u,g,m,p,height)}this.$SCOPE=s,this.DOM=t,o(t,this.$SCOPE)}function o(e,r){for(var s in e){var t=s,o=e[s].require,a=e[s].$,l=e[s].type;!function(e,s,t,o){if(t&&(o===h.input_type&&(r.on("keyup","#"+s.attr("id"),function(){var e=$(this).val(),r=i($(this));$(this).removeClass("error"),c.isNull(e)&&r.right.hide(),c.isNull(e)||(r.error.hide(),r.right.show())}),r.on("blur","#"+s.attr("id"),function(){var e=$(this).val(),r=i($(this));c.isNull(e)?($(this).addClass("error"),r.error.show(),r.right.hide()):($(this).removeClass("error"),r.error.hide(),r.right.show())})),o===h.weight_type)){var a=s.siblings(".decrease"),l=s.siblings(".plus"),n=s.parent("li").parent("ul").find("input");a.on("click",function(){var e=i(s),r=0;s.removeClass("error");try{var t=new Number(s.val())}catch(o){var t=0;return void s.val(0)}c.isNumber(t)&&t>0?(s.val(t-1),r=t-1):s.val(0),r+=t,n.each(function(){var e=$(this);r+=e.val()}),r>0&&(n.removeClass("error"),e.error.hide())}),l.on("click",function(){var e=i(s),r=0;s.removeClass("error");try{var t=new Number(s.val())}catch(o){var t=0;return void s.val(0)}c.isNumber(t)&&t>=0?(s.val(t+1),r=t+1):s.val(0),n.each(function(){var e=$(this);r+=e.val()}),r>0&&(n.removeClass("error"),e.error.hide())}),s.on("keydown",function(e){var r=e.keyCode;r>47&&58>r||8!==r&&c.preventDefault(e)}),s.on("keyup",function(e){var r=e.keyCode,t=0;if(r>47&&58>r&&8!==!r){try{var o=new Number(s.val())}catch(e){return void s.val(0)}t+=o;var a=i(s);!c.isNumber(o)||0>=o||(s.removeClass("error"),n.each(function(){var e=$(this);t+=e.val()}),t>0&&(n.removeClass("error"),a.error.hide()))}})}}(t,a,o,l)}}function a(e){e.animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40)}function i(e){var r={message:e.parents(".item-content").siblings(".item-message")};return r.error=r.message.find(".error-message"),r.right=r.message.find(".right-message"),r}var c=e("common/module/util.js"),l=e("common/module/select/select.js"),n=e("common/module/address/address.js"),h={is_require:!0,no_require:!1,input_type:"INPUT",weight_type:"WEIGHT",select_type:"SELECT",address_select_type:"ADDRESS"};t.prototype={check:function(){var e=this,r={};for(var s in e.DOM){var t=s;switch(r[t]={val:e.DOM[t].$.val()},e.DOM[t].type){case h.input_type:var o=i(e.DOM[t].$);if(0===o.error.length&&0===o.message.length&&0===o.right.length){r[t].checkPass=!0;break}e.DOM[t].require&&c.isNull(r[t].val)?(r[t].checkPass=!1,e.DOM[t].$.addClass("error"),a(e.DOM[t].$),e.DOM[t].$.focus(),o.error.show(),o.right.hide()):e.DOM[t].require?(e.DOM[t].$.removeClass("error"),r[t].checkPass=!0,o.error.hide(),o.right.show()):(r[t].checkPass=!0,o.error.hide(),o.right.hide());break;case h.select_type:var o=i(e.DOM[t].$.select.select_box);e.DOM[t].require&&c.isNull(r[t].val)?(r[t].checkPass=!1,e.DOM[t].$.select.select_box.addClass("error"),a(e.DOM[t].$.select.select_box),o.error.show(),o.right.hide()):(e.DOM[t].$.select.select_box.removeClass("error"),r[t].checkPass=!0,o.error.hide(),o.right.show());break;case h.weight_type:var o=i(e.DOM[t].$),l=0,n=e.DOM[t].$.parent("li").parent("ul").find("input");n.each(function(){var e=$(this);l+=e.val()}),c.isNumber(l)&&0>=l&&l>1e6?(e.DOM[t].$.addClass("error"),r[t].checkPass=!1,a(e.DOM[t].$),e.DOM[t].$.focus(),o.error.show(),o.right.hide()):(e.DOM[t].$.removeClass("error"),r[t].checkPass=!0,o.error.hide(),o.right.show());break;case h.address_select_type:var o=i(e.DOM[t].$.dom.wrap);if(0===o.error.length||0===o.message.length||0===o.right.length){r[t].checkPass=!0;break}var v=e.DOM[t].$.getProvince().id,d=e.DOM[t].$.getCity().id,u=e.DOM[t].$.getArea().id;v?v&&!d?(e.DOM[t].$.province.select.select.select_box.removeClass("error"),e.DOM[t].$.city.select.select.select_box.addClass("error"),e.DOM[t].$.area.select.select.select_box.addClass("error"),a(e.DOM[t].$.dom.wrap),r[t].checkPass=!1,o.error.show(),o.right.hide()):v&&d&&!u?(e.DOM[t].$.province.select.select.select_box.removeClass("error"),e.DOM[t].$.city.select.select.select_box.removeClass("error"),a(e.DOM[t].$.dom.wrap),r[t].checkPass=!1,e.DOM[t].$.area.select.select.select_box.addClass("error"),o.error.show(),o.right.hide()):(e.DOM[t].$.province.select.select.select_box.removeClass("error"),e.DOM[t].$.city.select.select.select_box.removeClass("error"),e.DOM[t].$.area.select.select.select_box.removeClass("error"),r[t].checkPass=!0,o.error.hide(),o.right.show()):(e.DOM[t].$.province.select.select.select_box.addClass("error"),e.DOM[t].$.city.select.select.select_box.addClass("error"),e.DOM[t].$.area.select.select.select_box.addClass("error"),a(e.DOM[t].$.dom.wrap),r[t].checkPass=!1,o.error.show(),o.right.hide())}}return r}},s.exports=t});