define("order/widget/view/order_details/order_details",function(o,t,e){function r(o,t,e){var r=new s,c=new d({width:500}),a={$scope:$("#order_details"),btnModify:$("#modify_productInfo"),btnQuit:$("#quit_order"),btnDispatch:$("#btn_dispatch"),btnRebuild:$("#reconstruct_order"),funcs_control:$("#order_details .funcs.control"),funcs_look:$("#order_details .funcs.look"),dispatch_info:$("#order_details .dispatch-info")},f=i({data:{addressInfo:o,orderid:t}}),l=n({data:{addressInfo:o,orderid:t},clickEditBtn:function(){f.init(),f.bind(),f.show()},clickConfirmBtn:function(){a.funcs_control.show(),a.funcs_look.hide(),a.dispatch_info.addClass("dispatch-editing-info")}});e&&1==e?l.show():e&&2==e?(a.funcs_control.show(),a.funcs_look.hide(),a.dispatch_info.addClass("dispatch-editing-info")):(a.funcs_control.hide(),a.funcs_look.show(),a.dispatch_info.removeClass("dispatch-editing-info")),a.btnModify.click(function(){f.init(),f.bind(),f.show()}),a.btnQuit.click(function(){r.show(),r.onComplete=function(o){XDD.Request({url:"/carteam/order/reConstruct_verify",data:{orderid:t,password:o},type:"get",success:function(o){r.hide(),0==o.error_code?(_alert("退载成功！"),window.location.href="/order/details?orderid="+t):_alert(o.error_msg||"退载失败！")}})}});var u;a.$scope.on("mouseover",".order-info .second-title .edit-records a",function(o){var t=$(this),e=function(t){var e=t.parent(".edit-records").attr("data-orderid"),r="";c.setContent('<p style="text-align:center;">正在加载中...</p>'),c.show(o),XDD.Request({url:"/carteam/order/modify_history",type:"get",data:{orderid:e},success:function(o){if(0==o.error_code){var t,e=o.data.length;if(e>0)for(t=0;e>t;t++)r+="<p>"+o.data[t].date+'</p><p><span style="margin-right:5px;">'+o.data[t].user+"</span>"+o.data[t].operateType+'</p><p style="margin-bottom:15px;">'+o.data[t].content+"</p>";else r='<p style="text-align:center;">暂无修改记录！</p>';c.setContent(r)}else c.setContent('<p style="text-align:center;">'+o.error_msg+"</p>")}})};u=setTimeout(function(){e(t)},800)}).on("mouseleave",".order-info .second-title .edit-records",function(){clearTimeout(u),c.hide()}),a.btnDispatch.click(function(){l.show()})}var i=o("order/module/edit_product/edit_product.js"),n=o("order/module/confirm_product/confirm_product.js"),d=o("common/module/cards/cards.js"),s=o("order/module/comfirm_psw_pop/comfirm_psw_pop.js");e.exports={init:function(o,t,e){r(o,t,e)}}});