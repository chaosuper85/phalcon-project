define("order/widget/view/order_details/order_details",function(t,e,o){function d(t,e,o){var d=new n,a=new i({width:500}),c={$scope:$("#order_details"),btnModify:$("#modify_productInfo"),btnQuit:$("#quit_order"),btnDispatch:$("#btn_dispatch"),btnRebuild:$("#reconstruct_order"),status_thead:$("#order_details .status-thead"),dispatch_thead:$("#order_details .dispatch-thead"),funcs_control:$("#order_details .funcs.control-td"),funcs_status:$("#order_details .funcs.status-td"),dispatch_info:$("#order_details .dispatch-info"),dispatch_info_btn:$("#order_details .dispatch-info-btn")},u=s({data:{addressInfo:t,orderid:e}}),h=r({data:{addressInfo:t,orderid:e},clickEditBtn:function(){u.init(),u.bind(),u.show()},clickConfirmBtn:function(){c.dispatch_thead.show(),c.status_thead.show(),c.funcs_control.show(),c.funcs_status.show(),c.dispatch_info.addClass("dispatch-editing-info")}});o&&1==o?h.show():o&&2==o?(c.dispatch_thead.show(),c.status_thead.show(),c.funcs_control.show(),c.funcs_status.show(),c.dispatch_info.addClass("dispatch-editing-info")):(c.dispatch_thead.hide(),c.status_thead.show(),c.funcs_control.hide(),c.funcs_status.show(),c.dispatch_info.removeClass("dispatch-editing-info")),c.btnModify.click(function(){u.init(),u.bind(),u.show()}),c.btnQuit.click(function(){var t=$(this);d.show(),d.onComplete=function(o){var s=t.text();t.html("正在退载..."),t.attr("disabled","disabled"),XDD.Request({url:"/carteam/order/reConstruct_verify",data:{orderid:e,password:o},type:"get",success:function(o){d.hide(),0==o.error_code?(_alert("退载成功！"),window.location.href="/order/details?orderid="+e):_alert(o.error_msg||"退载失败！"),t.html(s),t.removeAttr("disabled")},error:function(){t.html(s),t.removeAttr("disabled")}})}});var f;c.$scope.on("mouseover",".order-info .second-title .edit-records a",function(t){var e=$(this),o=function(e){a.setContent('<p style="text-align:center;">正在加载中...</p>'),a.show(t);var o=e.parent(".edit-records").attr("data-orderid"),d="";XDD.Request({url:"/carteam/order/modify_history",type:"get",data:{orderid:o},success:function(t){if(0==t.error_code){var e,o=t.data.length;if(o>0)for(e=0;o>e;e++)d+="<p>"+t.data[e].date+'</p><p><span style="margin-right:5px;">'+t.data[e].user+"</span>"+t.data[e].operateType+'</p><p style="margin-bottom:15px;">'+t.data[e].content+"</p>";else d='<p style="text-align:center;">无！</p>';a.setContent(d)}else a.setContent(t.error_msg)}})};f=setTimeout(function(){o(e)},1)}).on("mouseleave",".order-info .second-title .edit-records",function(){clearTimeout(f),a.hide()}),c.btnDispatch.click(function(){h.show()})}var s=t("order/module/edit_product/edit_product.js"),r=t("order/module/confirm_product/confirm_product.js"),i=t("common/module/cards/cards.js"),n=t("order/module/comfirm_psw_pop/comfirm_psw_pop.js");o.exports={init:function(t,e,o){d(t,e,o)}}});