define("common/module/searchBox/searchBox",function(require,exports,module){var tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<ul class="XDD_searchBox_result"></ul>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],util=require("common/module/util.js"),_txt="";!function(a){a.fn.XDDSearchBox=function(t){function e(t){var e=a(t.target),r=e.val(),s=t.keyCode,l=e.siblings(".XDD_searchBox_result"),v=l.find("li");return e.removeAttr("data-id"),c.onKeyup(r),util.isNull(r)?(l.parent().css("z-index","1"),void l.hide()):13===s?void i(e,v,l):38===s?void n(l,v):40===s?void o(l,v):void(r!=_txt&&(_txt=r,39!==s&&37!==s&&d(r,l,e)))}function r(t){var e=a(t.target),r=(e.val(),e.siblings(".XDD_searchBox_result"));r.parent().css("z-index","1"),r.hide()}function i(t,e,r){if(!(1>v)){var i=e.length;v>i||e.each(function(e){var i=a(this);if(i.removeClass("hover"),v===e+1){var n=t.val(i.find("a").text()),o=i.attr("data-id");t.attr("data-id",o),r.parent().css("z-index","1"),r.hide(),c.onSelect(n)}})}}function n(t,e){var r=e.length;1>=v&&(v=r+1),v--,e.each(function(e){var r=a(this);r.removeClass("hover"),v===e+1&&(t.scrollTop(r.innerHeight()*e),r.addClass("hover"))})}function o(t,e){var r=e.length;(-1==v||v>=r)&&(v=0),v++,e.each(function(e){var r=a(this);r.removeClass("hover"),v===e+1&&(t.scrollTop(r.innerHeight()*e),r.addClass("hover"))})}function s(t){var e=a(t.target),r=e.parent().parent(),i=r.siblings("input"),n=e.text(),o=e.parent("li").attr("data-id");i.val(n),i.attr("data-id",o),r.parent().css("z-index","1"),r.hide(),c.onSelect(n)}function d(a,t,e){var r={},i=c.key||"keyWord",n=c.resKeyName,o=c.appKeyName||"",s=c.keyId||"";r[i]=a,XDD.Request({url:c.url,data:r,success:function(r){if(0==r.error_code){var i="";if(!r.data||0===r.data.length)return t.parent().css("z-index","1"),void t.hide();t.parent().css("z-index","99999"),t.show();for(var d in r.data){var l=r.data[d][s]||"";a==r.data[d][n]||a==r.data[d][o]?(r.data[d][n]&&(e.attr("data-id",l),i+='<li class="active" data-id="'+l+'"><a href="javaScript:">'+r.data[d][n]+"</a></li>"),o&&r.data[d][o]&&(e.attr("data-id",l),i+='<li class="active" data-id="'+l+'"><a href="javaScript:">'+r.data[d][o]+"</a></li>")):(r.data[d][n]&&(i+='<li data-id="'+l+'"><a href="javaScript:">'+r.data[d][n]+"</a></li>"),o&&r.data[d][o]&&(i+='<li data-id="'+l+'"><a href="javaScript:">'+r.data[d][o]+"</a></li>"))}return void t.html(i)}t.parent().css("z-index","1"),t.hide(),v=-1}})}var l={url:"/carteam/order/search_ship_company",onKeyup:function(){},onSelect:function(){}},c=a.extend({},l,t),v=-1;return this.each(function(){var t=a(this);if(t.is("input")&&"text"!==!t.attr("type")){var i=a('<div class="XDD_searchBox_container"></div>'),n=a(tpl());t.before(i),i.html(t),i.append(n);var o={width:t.innerWidth(),height:t.innerHeight(),resultOffsetTop:t.position().top};o.resultOffsetTop=o.height+o.resultOffsetTop,n.innerWidth(o.width),n.css("top",o.resultOffsetTop),n.css("line-height",o.height+"px"),n.on("mouseover","li",function(){var e=a(this),i=n.find("li");i.removeClass("hover"),e.addClass("hover"),i.each(function(t){var e=a(this);return e.hasClass("hover")?void(v=t+1):void 0}),t.unbind("blur",r)}),n.on("mouseleave","li",function(){var e=a(this);e.removeClass("hover"),v=-1,t.bind("blur",r)}),n.on("click","a",s),t.bind("keyup",e)}})}}(jQuery)});