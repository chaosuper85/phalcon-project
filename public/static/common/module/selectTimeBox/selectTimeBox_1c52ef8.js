define("common/module/selectTimeBox/selectTimeBox",function(e,t,s){function i(e){function t(e){var t={wrap:e.wrap||"",width:e.width||48,height:e.height||30,font_size:e.font_size||14,level:e.level||3,st_year:e.st_year||v.st_year,ed_year:e.ed_year||v.ed_year},s={wrap:$(t.wrap)||null,year:$('<div class="select_time_year"></div>'),month:$('<div class="select_time_month"></div>'),day:$('<div class="select_time_day"></div>'),hour:$('<div class="select_time_hour"></div>'),min:$('<div class="select_time_min"></div>'),sec:$('<div class="select_time_sec"></div>')};this.st_year=t.st_year,this.ed_year=t.ed_year,this.select={},this.year={},this.month={},this.day={},this.hour={},this.min={},this.sec={},this.dom=s,this.select.style={width:t.width,height:t.height,font_size:t.font_size,options_max_height:t.options_max_height},this.level=p=t.level,this._render()}function s(e,t){for(var s=[],i=e;i;){var l={},h=i;if(10>i){var a="0",n=h.toString();l={value:a+n,text:a+n}}else l={value:i,text:i};if(s.push(l),i===t)break;i++}return s}function i(){for(var e=[],t=1;t;){var s={},i=t;if(10>t){var l="0",h=i.toString();s={value:l+h,text:l+h}}else s={value:t,text:t};if(e.push(s),23===t)break;t++}return e}function a(){for(var e=v.min.length,t=[],s=0;e>s;s++){var i={value:v.min[s],text:v.min[s]};t.push(i)}return t}function n(e){var t=c.val(),s=r.val();if(l.isNumber(t)&&l.isNumber(s)){("string"!=typeof e||"notOnChange"!==e)&&(d.setSelectedVal("01"),d.setSelectedText("01"));var i=parseInt(t),h=parseInt(s),a=1,n=[];if(1===h||3===h||5===h||7===h||8===h||10===h||12===h)for(;a&&(n.push(o(a)),31!==a);)a++;else if(4===h||6===h||9===h||11===h)for(;a&&(n.push(o(a)),30!==a);)a++;else if(2===h)if(i%4===0&&i%100!==0||i%100===0&&i%400===0)for(;a&&(n.push(o(a)),29!==a);)a++;else for(;a&&(n.push(o(a)),28!==a);)a++;d.setOptions(n)}}function o(e){var t=e;if(10>e){var s="0",i=t.toString();return{value:s+i,text:s+i}}return{value:e,text:e}}var c,r,d,_,m,u,p,v={st_year:2e3,ed_year:2020,min:[0,30]};return t.prototype._render=function(){var e=new Date,t=e.getMonth()+1;10>t&&(t="0"+t);var l='style="line-height:'+this.select.style.height+'px;"';this.dom.wrap.append(this.dom.year).append('<div class="select_year_text" '+l+">年</div>").append(this.dom.month).append('<div class="select_month_text" '+l+">月</div>").append(this.dom.day).append('<div class="select_day_text" '+l+">日</div>"),this.level>3&&this.dom.wrap.append(this.dom.hour).append('<div class="select_hours_text" '+l+">时</div>"),this.level>4&&this.dom.wrap.append(this.dom.min).append('<div class="select_min_text" '+l+">分</div>"),this.level>5&&this.dom.wrap.append(this.dom.sec).append('<div class="select_sec_text" '+l+">秒</div>"),this.year.select=c=new h({container:this.dom.year,width:this.select.style.width,height:this.select.style.height,font_size:this.select.style.font_size,options_max_height:this.select.style.options_max_height,defaultText:e.getFullYear(),defaultValue:e.getFullYear(),onSelectChange:n,text_align:"center",options:s(this.st_year,this.ed_year)}),this.month.select=r=new h({container:this.dom.month,width:this.select.style.width,height:this.select.style.height,font_size:this.select.style.font_size,options_max_height:this.select.style.options_max_height,defaultText:t,defaultValue:t,onSelectChange:n,text_align:"center",options:s(1,12)}),this.day.select=d=new h({container:this.dom.day,width:this.select.style.width,height:this.select.style.height,font_size:this.select.style.font_size,options_max_height:this.select.style.options_max_height,defaultText:e.getDate(),defaultValue:e.getDate(),onSelectChange:"",text_align:"center"}),this.level>3&&(this.hour.select=_=new h({container:this.dom.hour,width:this.select.style.width,height:this.select.style.height,font_size:this.select.style.font_size,options_max_height:this.select.style.options_max_height,defaultText:e.getHours(),defaultValue:e.getHours(),onSelectChange:"",text_align:"center",options:i()})),this.level>4&&(this.min.select=m=new h({container:this.dom.min,width:this.select.style.width,height:this.select.style.height,font_size:this.select.style.font_size,options_max_height:this.select.style.options_max_height,defaultText:"00",defaultValue:"00",onSelectChange:"",text_align:"center",options:a()})),6===this.level&&(this.sec.select=u=new h({container:this.dom.sec,width:this.select.style.width,height:this.select.style.height,font_size:this.select.style.font_size,options_max_height:this.select.style.options_max_height,defaultText:"00",defaultValue:"00",onSelectChange:"",text_align:"center",options:s(1,60)})),n("notOnChange"),this.setTime()},t.prototype.setTime=function(e){var t=e||this.dom.wrap.attr("data-time");if(t){try{var s=new Date(t.replace(/-/g,"/"))}catch(i){console.log(i);var s=new Date}var l=s.getFullYear(),h=s.getMonth()+1,a=s.getDate(),o=s.getHours(),c=s.getMinutes(),r=s.getSeconds();this.year.select.setSelectedVal(l),this.year.select.setSelectedText(l),this.month.select.setSelectedVal(h),this.month.select.setSelectedText(h),n("notOnChange"),this.day.select.setSelectedVal(a),this.day.select.setSelectedText(a),this.hour.select&&(this.hour.select.setSelectedVal(o),this.hour.select.setSelectedText(o),this.min.select&&(this.min.select.setSelectedVal(c),this.min.select.setSelectedText(c),this.sec.select&&(this.sec.select.setSelectedVal(r),this.sec.select.setSelectedText(r))))}},t.prototype.val=function(){var e="",t="",s="",i="",l="",h="",a="";return e=this.year.select?this.year.select.val():"",t=this.month.select?this.month.select.val():"",s=this.day.select?this.day.select.val():"",a=e+"-"+t+"-"+s,p>3&&(l=this.hour.select?this.hour.select.val():"",a+=" "+l),p>4&&(i=this.min.select?this.min.select.val():"",a+=":"+i),p>5&&(h=this.sec.select?this.sec.select.val():"",a+=":"+h),a},new t(e)}var l=e("common/module/util.js"),h=e("common/module/select/select.js");s.exports=i});