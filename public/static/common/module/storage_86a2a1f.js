define("common/module/storage",function(e,t,r){var a={};a._isValidKey=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},a.userData=function(){var e="_ALL.KEY_",t=function(){var e=null;return e=document.createElement("input"),e.type="hidden",e.addBehavior("#default#userData"),document.body.appendChild(e),e},r=function(e,r){try{var a=t(),l=r||{};if(l.expires){var o;"number"==typeof l.expires&&(o=new Date,o.setTime(o.getTime()+l.expires)),a.expires=o.toUTCString()}l.expires=null,a.setAttribute(l.key,l.value),a.save(l.key)}catch(n){}},a=function(t,a){r(t,a),result=l({key:e}),result=result?{value:result}:{key:e,value:""},new RegExp("(^||)"+t+"(||$)").test(result.value)||(result.value+="|"+t,r(e,result))},l=function(e){try{var r=t();return r.load(e.key),r.getAttribute(e.key)||null}catch(a){return null}},o=function(e){try{var r=t();r.load(e.key),r.removeAttribute(e.key);var a=new Date;a.setTime(a.getTime()-1),r.expires=a.toUTCString(),r.save(e.key)}catch(l){}},n=function(){if(result=l({key:e})){result={value:result};for(var t=(result.value||"").split("|"),r=t.length,a=0;r>a;a++)o({key:t[a]})}};return{getItem:l,setItem:a,removeItem:o,clearAll:n}}(),a._isSupportLocalStorage=function(){return"localStorage"in window&&null!==window.localStorage},a.isSupportStorage=function(){return"localStorage"in window&&null!==window.localStorage||document.all},a.set=function(e){if(a._isValidKey(e.key)){var t=e||{};if(a._isSupportLocalStorage()){if(window.localStorage.setItem(t.key,t.value),t.expires){var r=new Date;window.localStorage.setItem(t.key+".expires",r.getTime()+t.expires)}}else a.userData.setItem(t.key,t)}},a.get=function(e){var t=null;if(!a._isValidKey(e.key))return t;if(a._isSupportLocalStorage()){var r=window.localStorage.getItem(e.key);if(r){var l=window.localStorage.getItem(e.key+".expires");if(l)var o=new Date(parseInt(l,10));else var o=null;t={value:r,expires:o},t&&t.expires&&t.expires<new Date&&(t=null,window.localStorage.removeItem(e.key))}}else t=a.userData.getItem(e),t&&(t={value:t});return t?t.value:null},a.remove=function(e){a._isSupportLocalStorage()?(window.localStorage.removeItem(e.key),window.localStorage.removeItem(e.key+".expires")):a.userData.removeItem(e)},a.clearAll=function(){a._isSupportLocalStorage()?window.localStorage.clear():a.userData.clearAll()},r.exports=a});