define("common/module/upload/uploader",function(e){var t=e("common/module/util.js");!function(e){e.fn.AjaxFileUpload=function(n){function a(t){var a=e(t.target),m=a.attr("id"),c=a.removeAttr("id").clone().attr("id",m).AjaxFileUpload(n),u=a.val().replace(/.*(\/|\\)/,""),f=r(),p=l(f);c.insertBefore(a),d.onChange.call(c[0],u),f.bind("load",{element:c,form:p,filename:u},i),p.append(a).bind("submit",{element:c,iframe:f,filename:u},o).submit()}function o(t){var n=d.onSubmit.call(t.data.element,t.data.filename);if(n===!1)return e(t.target).remove(),t.data.iframe.remove(),!1;for(var a in n)e("<input />").attr("type","hidden").attr("name",a).val(n[a]).appendTo(t.target)}function i(n){var a=e(n.target),o=(a[0].contentWindow||a[0].contentDocument).document,i=t.delHtmlTag(o.body.innerHTML),r=0;if(i)try{i=e.parseJSON(i)}catch(l){_alert("您上传的文件格式过大或其他未知错误！详情请联系箱典典官方客服400-969-6790"),r=1}else i={};0==r&&d.onComplete.call(n.data.element,n.data.filename,i),n.data.form.remove(),a.remove()}function r(){var t=c();return e("body").append('<iframe src="javascript:false;" name="'+t+'" id="'+t+'" style="display: none;"></iframe>'),e("#"+t)}function l(t){return e("<form />").attr({method:"post",action:d.action,enctype:"multipart/form-data",target:t[0].name}).hide().appendTo("body")}var m={action:"/api/account/uploadPic",onChange:function(){},onSubmit:function(){},onComplete:function(){}},d=e.extend({},m,n),c=function(){var e=0;return function(){return"_AjaxFileUpload"+e++}}();return this.each(function(){var t=e(this);t.is("input")&&"file"===t.attr("type")&&t.bind("change",a)})}}(jQuery)});