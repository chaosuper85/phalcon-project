define("user/widget/view/account_info/account_info",function(e,t,n){function i(){for(var e=0;2>=e;e++){var t=$("#user_info .input"+e),n=t.prev(),i=n.text();t.val(n.hasClass("none")?"":i),t.show()}}function a(){var e=$("#input-name"),t=e.val();return t?(s(e),t):(u(e),!1)}function o(){var e=$("#input-phone"),t=e.val();return t&&c.isMobilePhone(t)?(s(e),t):(u(e),!1)}function r(){var e=$("#input-telephone"),t=e.val();return t&&c.isTelephone(t)?(s(e),t):(u(e),!1)}function s(e){var t=e.siblings(".tip");t.addClass("pass").removeClass("invisible")}function u(e){var t=e.siblings(".tip");t.removeClass("pass").removeClass("invisible"),l(e)}function l(e){e.animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}var c=e("common/module/util.js"),f=$("#userinfo_edit"),m=$("#userinfo_submit"),v=$(".content_txt"),p=$(".input-edit");n.exports=function(){f.on("click",function(){v.hide(),f.hide(),m.show(),i()}),m.on("click",function(){var e=$(this),t=a();if(t){var n=o();if(n){var i=r();if(i){var s=e.text();e.html("正在修改..."),e.attr("disabled","disabled"),XDD.Request({url:"/account/updateBaseInfo",data:{realName:t,contactMobile:n,telephone_number:i},success:function(a){0==a.error_code?(_alert("修改成功！"),$("#txt_name").text(t),$("#txt_phone").text(n),$("#txt_telephone").text(i),p.hide(),v.show(),f.show(),m.hide(),$("#user_info .tip").hide()):_alert(a.error_msg),e.html(s),e.removeAttr("disabled")},error:function(){e.html(s),e.removeAttr("disabled")}})}}}})}});