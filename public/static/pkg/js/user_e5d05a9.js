;/*!/user/widget/header/header.js*/
define("user/widget/header/header",function(e,n,o){function c(){$("#logout").click(function(){XDD.Request({type:"GET",url:"/index/logout",success:function(e){0==e.error_code?location.href="/":_alert(e.error_msg)}})}),$("#ucenter").click(function(){location.href="/account/personalInfo"})}o.exports={init:function(){c()}}});
;/*!/user/widget/view/account_company/company.js*/
define("user/widget/view/account_company/company",function(e,n,t){function o(e){function n(e){{var n=e.split(".");n.length-1}}function t(e,n){if(n)var t=b.val(),o=t.city.id;else var o=w.val();return o>0?(g=1,o):(g=0,!1)}function o(e){var n=$(e),t=n.val();return t?(g=1,t):(g=0,!1)}function s(){var e=N.val(),n=new Date(e.replace("-","/").replace("-","/")),t=new Date,o="";o+=t.getFullYear()+"-",o+=t.getMonth()+1+"-",o+=t.getDate()+"-";var c=new Date(o.replace("-","/").replace("-","/"));return n>c?(console.log(e),g=0,!1):(g=1,e)}function u(e){var n=$(e).val();return n&&r.isNumber(n)?(g=1,n):(g=0,!1)}function m(e){console.log("aa",$(e)),$(e).animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}function d(e){var n=$(e).closest(".content").siblings(".tip");$(n).removeClass("invisible"),$(n).children("i").removeClass("i-right"),g=0}function f(e){var n=$(e).closest(".content").siblings(".tip"),t=n.children("i");$(n).removeClass("invisible"),$(t).addClass("i-right")}var p,v,g=0,b=new c({wrap:"#address-selector",level:2,width:160,height:40}),h="货代用户",y="车队用户";"2"==e?v=h:"1"==e&&(v=y);var _,M,w=new i({container:"#type-selector",options:[{text:"货代用户",value:"2"},{text:"车队用户",value:"1"}],defaultText:v,defaultValue:e,height:40}),x=new Date,j=+x.getFullYear(),N=new l({wrap:"#company_date_selectBox",ed_year:j,width:70,height:40});$("#upload-license").AjaxFileUpload({onComplete:function(e,t){console.log(e,t);var o=n(e);o&&($("#img-license").attr("src",t.data.pic_url),_=t.data.pic_url,$(".img-license-content").removeClass("hidden"),f(".img-license-content"))}}),$("#img-clean").on("click",function(){$("#img-license").attr("src",""),$(".img-license-content").addClass("hidden"),d(".img-license-content"),_="",g=0}),$(".license").on("click",function(){var e=$(".license").attr("src");window.open(e)}),$("#submitInfo").on("click",function(){function e(){$("#confirmBtn").on("click",function(){n(),p.hide()}),$("#cancelBtn").on("click",function(){console.log("cancle"),p.hide(),$("#confirmBtn").unbind("click")})}function n(){XDD.Request({url:"/account/do_apply",data:{enterpriseName:c,type:i,cityCode:l,builddate:r,contactMobile_city:v,contactMobile_number:b,contactMobile_fenji:h,licenceNumber:y,licencePic:M},success:function(e){0==e.error_code?(_alert("提交成功，请等待审核"),$(".pop-close").on("click",function(){location.href="/account/enterpriseInfo"}),$(".popup-bg").on("click",function(){location.href="/account/enterpriseInfo"})):_alert(e.error_msg)}},!0)}var c=o("#enterpriseName");if(!c)return m("#enterpriseName"),void d("#enterpriseName");f("#enterpriseName");var i=t("#type-selector");if(!i)return m("#type-selector"),void d("#type-selector");console.log("选择了",i),f("#type-selector"),"1"==i?i="carteam":"2"==i&&(i="freight_agent"),console.log("类型 = "+i);var l=t("#address-selector","1");if(!l)return m("#address-selector"),void d("#address-selector");f("#address-selector");var r=s("#company_date_selectBox");if(!r)return m("#company_date_selectBox"),void d("#company_date_selectBox");f("#company_date_selectBox");var v=u("#contactMobile-city");if(!v)return m("#contactMobile-city"),void d("#contactMobile-city");if(3!=v.length&&4!=v.length)return m("#contactMobile-city"),void d("#contactMobile-city");f("#contactMobile-city");var b=u("#contactMobile-number");if(!b)return m("#contactMobile-number"),void d("#contactMobile-number");if(7!=b.length&&8!=b.length)return m("#contactMobile-number"),void d("#contactMobile-number");f("#contactMobile-number");var h=u("#contactMobile-fenji");if(h){if(h.length<3||h.length>5)return alert("000"),m("#contactMobile-fenji"),void d("#contactMobile-fenji");f("#contactMobile-fenji")}else f("#contactMobile-fenji"),console.log("fenji=",h);var y=u("#licenseNumber");return y?(f("#licenseNumber"),M=_?_:$("#img-license").attr("src"),console.log(r+"---------"+M),M?(g=1,f("#img-license"),0==g?!1:void(1==g&&(p?p.show():(p=new a,p.setData("公司信息一经提交，不能修改"),p.show()),e()))):(d("#img-license"),void(g=0))):(m("#licenseNumber"),void d("#licenseNumber"))})}e("common/module/upload/uploader.js");var c=e("common/module/address/address.js"),i=e("common/module/select/select.js"),l=e("common/module/selectTimeBox/selectTimeBox.js"),a=e("common/module/confirm/confirm.js"),r=e("common/module/util.js");t.exports={init:function(e){o(e)}}});
;/*!/user/widget/view/account_info/account_info.js*/
define("user/widget/view/account_info/account_info",function(i,n,e){function t(){function i(){for(var i=0;2>=i;i++){var n=$(".input"+i),e=n.prev(),t=e.text();e.hasClass("none")?n.val():n.attr("value",t)}}function n(){var i=$("#input-name"),n=i.val();return""==!n?(i.siblings(".tip").removeClass("invisible"),t("#input-name"),n):(i.siblings(".tip").removeClass("invisible"),i.siblings(".right-mark").addClass("invisible"),s("#input-name"),!1)}function e(){var i=$("#input-phone"),n=i.val(),e=o.isMobilePhone(n);return e?(i.siblings(".tip").removeClass("invisible"),t("#input-phone"),n):(i.siblings(".tip").removeClass("invisible"),i.siblings(".right-mark").addClass("invisible"),s("#input-phone"),!1)}function t(i){var n=$(i).siblings(".tip").children("i");$(n).addClass("i-right")}function s(i){$(i).animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}$("html body").on("click","#user_info .user-content .edit #edit-info",function(){$(".show").hide(),$(".input-edit").show(),$(this).hide(),$("#submit-info").show(),i()}),$("html body").on("click","#user_info .edit-dd input",function(){$(this).siblings("#right-mark").addClass("invisible")}),$("html body").on("click","#user_info .user-content .edit #submit-info",function(){var i=n(1),t=$("#input-telephone").val(),o=e(1);o&&i&&XDD.Request({url:"/account/updateBaseInfo",data:{realName:i,contactMobile:o,telephone_number:t},success:function(n){console.log(n),0==n.error_code?(_alert("资料修改成功！"),$("#name").text(i),$("#phone").text(o),$("#telephone").text(t),$(".show").show(),$(".input-edit").hide(),$(this).hide(),$("#edit-info").show(),$("#submit-info").hide(),$(".tip").hide()):_alert(n.error_msg)}})})}i("common/module/upload/uploader.js");var o=i("common/module/util.js");e.exports={init:function(){t()}}});
;/*!/user/widget/view/account_security/select_change_mobile.js*/
define("user/widget/view/account_security/select_change_mobile",function(require,exports,module){var popup=require("common/module/popup/popup.js"),tpl=[function(locals,filters,escape,rethrow){function rethrow(e,s,n,t){var c=s.split("\n"),a=Math.max(t-3,0),i=Math.min(c.length,t+3),r=c.slice(a,i).map(function(e,s){var n=s+a+1;return(n==t?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=n,e.message=(n||"ejs")+":"+t+"\n"+r+"\n\n"+e.message,e}escape=escape||function(e){return String(e).replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<div id="select-box">\n    <img src="<%=__uri(\'../../../../common/static/image/logo.png\')%>" alt="56xdd.com" class="logo"/>\n    <dl>\n        <dd class="clearfix">\n            <a href="/user/changeBind?pass" id="select-pass" class="user-btn">通过输入密码进行修改<em>>></em></a>\n\n        </dd>\n        <dd class="clearfix">\n            <a href="/user/changeBind?sms" id="select-sms" class="user-btn">通过手机验证码进行修改<em>>></em></a>\n        </dd>\n    </dl>\n</div>',filename:"user/widget/view/account_security/select_change_mobile.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('<div id="select-box">\n    <img src="',escape((__stack.lineno=2,"/static/common/static/image/logo_8633d69.png")),'" alt="56xdd.com" class="logo"/>\n    <dl>\n        <dd class="clearfix">\n            <a href="/user/changeBind?pass" id="select-pass" class="user-btn">通过输入密码进行修改<em>>></em></a>\n\n        </dd>\n        <dd class="clearfix">\n            <a href="/user/changeBind?sms" id="select-sms" class="user-btn">通过手机验证码进行修改<em>>></em></a>\n        </dd>\n    </dl>\n</div>')}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}}][0],select=function(){function e(){}return e.prototype=new popup({title:!1,height:340,width:330,tpl:tpl}),e.prototype.constructor=e,e.prototype.setHeight=function(e){this.pop.height(e)},new e};module.exports=select});
;/*!/user/widget/view/account_security/account_security.js*/
define("user/widget/view/account_security/account_security",function(c,e,t){function n(){$("html body").on("click","#user-account-security .user-content #change-mobile",function(){u.show()})}var i=c("user/widget/view/account_security/select_change_mobile.js"),u=i();t.exports={init:function(){n()}}});
;/*!/user/widget/view/account_security/change_pass.js*/
define("user/widget/view/account_security/change_pass",function(n,e,a){function t(){function n(n,e){var a=$(n).val(),i=a.length,o=r.isPassword(a);return i?6>i?(t(n),s(n,"密码为6-16位"),!1):o?(s(n,""),a):(t(n),s(n,"密码必须包含字母和数字"),!1):e?(t(n),s(n,"请输入密码"),!1):void 0}function e(n,e,a){var r=$(n).val(),i=$(e).val();return i.length?i!==r?(t(e),s(e,"两次输入密码不一致"),!1):(s(e,""),i):a?(t(e),s(e,"请再次输入密码"),!1):void 0}function a(a){var t=a,r=n("#new-pass",1);if(r)var s=e("#new-pass","#new-repass",1);r&&s&&XDD.Request({url:"/account/changePwd ",data:{oldPwd:t,newPwd:r},success:function(n){0==n.error_code?(_alert("修改密码成功！"),setTimeout("location.href = '/account/personalInfo'",2e3)):_alert(n.error_msg)}})}function t(n){$(n).animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}function s(n,e){var a=$(n).siblings(".tip");$(a).addClass("red").html(e)}$("#new-pass").on("blur",function(){n("#new-pass")}),$("#new-repass").on("blur",function(){e("#new-pass","#new-repass")}),$(".next-step").on("click",function(){var e=n("#pass",1);e&&XDD.Request({url:"/user/validatePwd",data:{pwd:e},success:function(n){0==n.error_code?a(e):_alert(n.error_msg)}})})}var r=n("common/module/util.js");a.exports={init:function(){t()}}});
;/*!/user/widget/view/account_security/change_phone.js*/
define("user/widget/view/account_security/change_phone",function(e,s,t){function n(){function e(){"pass"==f?$("#step-one-pass").show():"sms"==f&&$("#step-one-sms").show()}function s(e){var s=$("#step-one-password").val(),t=o.isPassword(s);return s.length?s.length<6?(p("#step-one-password"),void d(".tip-pass","密码为6-16位")):t?($(".tip-pass").html(""),s):(p("#step-one-password"),void d(".tip-pass","密码必须包含字母和数字")):e?void d(".tip","请输入密码"):void 0}function t(){XDD.Request({type:"GET",url:"/user/sendSms",data:{smsType:"NORMAL_AUTH"},success:function(e){if(0==e.error_code){_alert("已向您的手机发送了短信，请注意查收");var s=60,t=function(){1==s?($("#get-sms").html("重发短信"),$("#get-sms").removeClass("disable"),clearTimeout(n)):(s--,$("#get-sms").html("重发("+s+")"),$("#get-sms").addClass("disable"),setTimeout(t,1e3))},n=setTimeout(t,1e3)}else _alert(e.error_msg)}})}function n(e){var s=$("#change-phone-sms").val();return s.length?4!==s.length?(d(".tip-sms","请输入4位短信验证码"),void p("#change-phone-sms")):o.isNumber(s)?($(".tip-sms").html(""),s):(d(".tip-sms","短信验证码为4位数字"),void p("#change-phone-sms")):e?(d(".tip-sms","请输入短信验证码"),void p("#change-phone-sms")):void 0}function i(){$(".nav-one").removeClass("current").addClass("finshed"),$(".nav-two").addClass("current"),$("#step-one-sms").hide(),$("#step-one-pass").hide(),$("#step-two").show()}function a(e){var s=$("#new-mobile").val();return s?11!==s.length?(p("#new-mobile"),void d(".tip-newmobile","请输入11位手机号")):o.isMobilePhone(s)?s:(p("#new-mobile"),void d(".tip-newmobile","请输入正确的手机号")):e?(p("#new-mobile"),void d(".tip-newmobile","请输入手机号")):(p("#new-mobile"),void d(".tip-newmobile","请输入手机号"))}function r(e,s,t){XDD.Request({type:"GET",url:"/index/checkExist",data:{mobileOrName:s},success:function(e){"function"==typeof t&&t(e)}})}function m(){var e=a();XDD.Request({type:"GET",url:"/user/sendSms",data:{mobile:e,smsType:"CHANGE_MOBILE"},success:function(e){if(0==e.error_code){_alert("已向您的手机发送了短信，请注意查收");var s=60,t=function(){1==s?($("#get-new-sms").html("重发短信"),$("#get-new-sms").removeClass("disable"),clearTimeout(n)):(s--,$("#get-new-sms").html("重发("+s+")"),$("#get-new-sms").addClass("disable"),setTimeout(t,1e3))},n=setTimeout(t,1e3)}else _alert(e.error_msg)}})}function l(e){var s=$("#new-phone-sms").val();return s.length?4!==s.length?(d(".tip-newsms","请输入4位短信验证码"),p("#new-phone-sms"),!1):o.isNumber(s)?($(".tip-sms").html(""),s):(d(".tip-newsms","短信验证码为4位数字"),p("#new-phone-sms"),!1):e?(d(".tip-newsms","请输入短信验证码"),void p("#new-phone-sms")):void 0}function c(){$(".nav-two").removeClass("current").addClass("finshed"),$(".nav-three").addClass("current"),$("#step-two").hide(),$("#step-three").show(),u()}function u(){var e=5,s=function(){1==e?(window.location.href="/account/accountSecurity",clearTimeout(t)):(e--,$("#next-step-three").html(e+"S跳转"),setTimeout(s,1e3))},t=setTimeout(s,1e3)}function d(e,s){$(e).html(s),$(e).addClass("red")}function p(e){$(e).animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}var h=window.location.href,f=h.split("?")[1];e(),$(".next-step-one").on("click",function(){if("pass"==f){var e=s(1);e&&XDD.Request({url:"/user/validatePwd",data:{pwd:e},success:function(e){console.log(e),0==e.error_code?i():_alert(e.error_msg)}})}else if("sms"==f){var t=n(1);t&&XDD.Request({url:"/user/validateSmsCode",type:"GET",data:{code:t},success:function(e){console.log(e),0==e.error_code?i():_alert(e.error_msg)}})}}),$("#get-sms").on("click",function(){var e=$(this).hasClass("disable");e||t()}),$("#get-new-sms").on("click",function(){var e=a();e&&($(".tip-newmobile").html("正在检查手机号可用性..."),r(".tip-newmobile",e,function(e){if(0==e.error_code){d(".tip-newmobile","手机号可用"),$("#new-mobiletip").removeClass("red");var s=$("#get-new-sms").hasClass("disable");if(s)return!1;m()}else d(".tip-newmobile","手机号已被注册（或不可用）"),p("#new-mobile")}))}),$("#next-step-two").on("click",function(){var e=a(1),s=l(1);e&&s&&XDD.Request({url:"/user/changeBind",data:{code:s,mobile:e},success:function(e){console.log(e),0==e.error_code?(_alert("修改成功!"),c()):_alert(e.error_msg)}})})}var o=e("common/module/util.js");t.exports={init:function(){n()}}});
;/*!/user/widget/view/apply_manager/apply_manager.js*/
define("user/widget/view/apply_manager/apply_manager",function(o,e,n){function l(){$("#upload-licence").AjaxFileUpload({onComplete:function(o,e){console.log(o,e)}}),$("#upload-official").AjaxFileUpload({onComplete:function(o,e){console.log(o,e)}})}o("common/module/upload/uploader.js"),n.exports={init:function(){l()}}});
;/*!/user/widget/view/employee/employee.js*/
define("user/widget/view/employee/employee",function(e,a,i){function l(){var e={groupWindow:$(".group"),groupMsg:$(".group-msg"),groupList:$(".user_group"),groupSubmit:$(".submit-group")},a={allEmployee:$("#all_employee"),applyEmployee:$("#apply_employee"),searchEmployee:$("#search_result"),tab1:$("#tab1"),tab2:$("#tab2"),tab3:$("#tab3"),appealWin:$(".appeal-window"),appeal:$(".appeal"),cancle:$(".cancle"),confirmInvit:$(".invit-confirm"),invitWin:$(".invit-window"),btnInvit:$(".btn-invit")};e.groupMsg.click(function(){var e=$(this);return e.siblings().slideToggle(),!1}),a.appeal.click(function(){var e=$(this);return e.parents().siblings(".appeal-window").show(),!1}),a.confirmInvit.click(function(){var e=$(this);e.parents().siblings(".invit-window").slideToggle()}),a.btnInvit.click(function(){a.invitWin.slideToggle()}),a.cancle.click(function(){a.appealWin.hide()}),e.groupSubmit.click(function(){s()}),a.tab2.on("click",function(){a.allEmployee.hide(),a.tab1.removeClass("cur").addClass("employee-hide"),a.applyEmployee.show(),a.tab2.removeClass("employee-hide").addClass("cur"),a.searchEmployee.hide(),a.tab3.css("background","#eff4f7"),a.tab3.find(".search-li").removeClass("search-li").addClass("search")}),a.tab1.on("click",function(){a.applyEmployee.hide(),a.tab2.removeClass("cur").addClass("employee-hide"),a.allEmployee.show(),a.tab1.removeClass("employee-hide").addClass("cur"),a.searchEmployee.hide(),a.tab3.css("background","#eff4f7"),a.tab3.find(".search-li").removeClass("search-li").addClass("search")}),a.tab3.on("click",function(){a.allEmployee.hide(),a.tab1.removeClass("cur").addClass("employee-hide"),a.applyEmployee.hide(),a.tab2.removeClass("cur").addClass("employee-hide"),a.searchEmployee.show(),a.tab3.find(".search").removeClass("search").addClass("search-li"),a.tab3.css("background","#ffffff")}),$(".apply-header ul li").click(function(){var e=$(this),a=$(this).index();e.addClass("cur").siblings().removeClass("cur"),0==a&&$("#wait_apply").show().siblings().hide(),1==a&&$("#send_apply").show().siblings().hide(),2==a&&$("#recommend_apply").show().siblings().hide()})}function s(){for(var e=$("input[name='group']"),a=0;a<e.length;a++)e[a].checked&&e[a].value}i.exports={init:function(){l()}}});
;/*!/user/widget/view/employee_apply/employee_apply.js*/
define("user/widget/view/employee_apply/employee_apply",function(e,a,c){function l(){var e={checkall:$("#checkall"),_accept:$(".btn-accept"),refuse:$(".btn-refuse"),selectStatus:$(".data-select-status")};e.selectStatus.click(function(){var e=$(this);e.hasClass("apply-data")?(e.removeClass("apply-data").addClass("apply-data-selected"),e.children(".chooese").find(".no-select").removeClass("no-select").addClass("selected").val("已选择")):e.hasClass("apply-data-selected")&&(e.removeClass("apply-data-selected").addClass("apply-data"),e.children(".chooese").find(".selected").removeClass("selected").addClass("no-select").val("选择"))}),e.checkall.click(function(){$("input[name='checkbox']").prop("checked",this.checked)}),$("input[name='checkbox']").click(function(){var e=$("input[name='checkbox']");$("#checkall").prop("checked",e.length==e.filter(":checked").length?!0:!1)}),e._accept.click(function(){var a=$(".apply-data-selected").length;e.selectStatus.each(function(){$(this).hasClass("apply-data-selected")}),0==a&&_alert("请至少选中一项")}),e.refuse.click(function(){})}c.exports={init:function(){l()}}});