;/*!/index/widget/header/header.js*/
define("index/widget/header/header",function(o,n,e){function i(){$("#login-btn").click(function(){c.show()}),$("#logout").click(function(){XDD.Request({type:"GET",url:"/index/logout",success:function(o){0==o.error_code?location.href="/":_alert(o.error_msg)}})})}var t=o("common/module/login/login.js"),c=t();e.exports={init:function(){i()}}});
;/*!/index/widget/view/forgotPassword/forgot_pwd.js*/
define("index/widget/view/forgotPassword/forgot_pwd",function(i,e,o){function t(){DOM={Module:{forgotPwd:$("#forgotPassword"),newPwd:$("#new_password"),finshPwd:$("#finsh_password"),regAccount:$(".sign-account")},FORM:{account:$("#pwd_account"),mobile:$("#pwd_msg"),newPwd:$("#new_pwd"),confirmPwd:$("#confirm_pwd")},Btn:{nextStep:$("#next_step"),confirm:$("#next_confirm"),gotoIndex:$("#goto_index"),msg:$("#btn_getMsg")},notice:{accountNotice:$(".xdd-mobile"),msgNotice:$(".xdd-msg"),newPwdNotice:$(".xdd-newpwd"),reConfirm:$(".xdd-repwd")}},n(),s(),c(),l(),$("input[name=changePwd]").focus(function(){var i=$(this);i.siblings(".tip").css("color","#999999"),i.siblings(".right-mark").addClass("invisible")}),DOM.Btn.nextStep.click(function(i){i.preventDefault(),n(),c();var e=DOM.FORM.account.val(),o=DOM.FORM.mobile.val();return""==e||null==e?(DOM.notice.accountNotice.html("请输入箱典典注册手机号码"),DOM.notice.accountNotice.css("color","#a94442"),!1):""==o||null==o?(DOM.notice.msgNotice.html("请输入四位数字的手机验证码"),DOM.notice.msgNotice.css("color","#a94442"),!1):void XDD.Request({type:"POST",url:"/user/validateSmsCode",data:{mobile:DOM.FORM.account.val(),code:DOM.FORM.mobile.val()},success:function(i){return 0!=i.error_code?(DOM.notice.msgNotice.html("验证码不正确"),DOM.notice.msgNotice.css("color","#a94442"),DOM.notice.msgNotice.siblings(".right-mark").addClass("invisible"),DOM.Btn.nextStep.attr("disabled",!0),!1):(DOM.notice.msgNotice.html("验证码正确"),DOM.notice.msgNotice.siblings(".right-mark").removeClass("invisible"),DOM.Module.forgotPwd.hide(),DOM.Module.newPwd.show(),void 0)}})}),DOM.Btn.msg.click(function(){n(),XDD.Request({type:"GET",url:"/user/sendSms",data:{mobile:DOM.FORM.account.val(),smsType:"CHANGE_PWD"},success:function(i){if(0==i.error_code){_alert("已向您的手机发送了短信，请注意查收"),DOM.Btn.msg.attr("disabled",!0),count=60;var e=function(){1==count?(DOM.Btn.msg.html("重发短信"),DOM.Btn.msg.attr("disabled",!0),clearTimeout(o)):(count--,DOM.Btn.msg.html("("+count+")后可重新发送"),setTimeout(e,1e3))},o=setTimeout(e,1e3)}}})}),DOM.Btn.confirm.click(function(i){i.preventDefault();var e=DOM.FORM.newPwd.val();if(null==e||""==e)return DOM.notice.newPwdNotice.html("新密码不能为空"),DOM.notice.newPwdNotice.css("color","#a94442"),DOM.notice.newPwdNotice.siblings(".right-mark").addClass("invisible"),!1;if(e.length<6||e.length>15)return DOM.notice.newPwdNotice.html("密码字符长度应在6～15位"),DOM.notice.newPwdNotice.css("color","#a94442"),DOM.notice.newPwdNotice.siblings(".right-mark").addClass("invisible"),!1;if(!a.isPassword(e))return DOM.notice.newPwdNotice.html("密码必须是数字和字母的组合"),DOM.notice.newPwdNotice.css("color","#a94442"),DOM.notice.newPwdNotice.siblings(".right-mark").addClass("invisible"),!1;DOM.notice.newPwdNotice.html("密码必须是数字和字母的组合"),DOM.notice.newPwdNotice.css("color","#999999"),DOM.notice.newPwdNotice.siblings(".right-mark").removeClass("invisible");var e=DOM.FORM.newPwd,o=DOM.FORM.confirmPwd;return e.val()!==o.val()?(DOM.notice.reConfirm.html("两次输入密码不一致"),DOM.notice.reConfirm.css("color","#a94442"),DOM.notice.reConfirm.siblings(".right-mark").addClass("invisible"),!1):(DOM.notice.reConfirm.siblings(".right-mark").removeClass("invisible"),XDD.Request({type:"POST",url:"/user/changePwd ",data:{newPwd:DOM.FORM.confirmPwd.val(),mobile:DOM.FORM.account.val()},success:function(i){0==i.error_code?(_alert(i.error_msg),DOM.Module.newPwd.hide(),DOM.Module.finshPwd.show()):_alert(i.error_msg)}}),void r(5))}),DOM.Btn.gotoIndex.click(function(i){i.preventDefault(),window.location.href="/index"})}function n(){DOM.FORM.account.blur(function(){var i=DOM.FORM.account.val();return 11!==i.length?(DOM.notice.accountNotice.html("请输入11位箱典典注册手机号码"),DOM.notice.accountNotice.css("color","#a94442"),DOM.notice.accountNotice.siblings(".right-mark").addClass("invisible"),!1):a.isMobilePhone(i)?null==i||""==i?(DOM.notice.accountNotice.html("手机号码不能为空"),DOM.notice.accountNotice.css("color","#a94442"),DOM.notice.accountNotice.siblings(".right-mark").addClass("invisible"),!1):(DOM.notice.accountNotice.html("箱点点注册手机号码"),DOM.notice.accountNotice.css("color","#999999"),void XDD.Request({type:"GET",url:"/index/checkMobileExist",data:{mobileOrName:DOM.FORM.account.val()},success:function(i){return 1!=i.error_code?(DOM.notice.accountNotice.html(i.error_msg),DOM.notice.accountNotice.css("color","#a94442"),DOM.notice.accountNotice.siblings(".right-mark").addClass("invisible"),DOM.Btn.msg.attr("disabled",!0),!1):(DOM.notice.accountNotice.html("手机号正确"),void DOM.notice.accountNotice.siblings(".right-mark").removeClass("invisible"))}})):(DOM.notice.accountNotice.html("请输入11位箱典典注册手机号码"),DOM.notice.accountNotice.css("color","#a94442"),DOM.notice.accountNotice.siblings(".right-mark").addClass("invisible"),!1)})}function c(){DOM.FORM.mobile.blur(function(){var i=DOM.FORM.mobile.val();return 4!==i.length?(DOM.notice.msgNotice.html("请输入四位数字的手机验证码"),DOM.notice.msgNotice.css("color","#a94442"),DOM.notice.msgNotice.siblings(".right-mark").addClass("invisible"),!1):a.isNumber(i)?void DOM.notice.msgNotice.siblings(".right-mark").removeClass("invisible"):(DOM.notice.msgNotice.html("请输入四位数字的手机验证码"),DOM.notice.msgNotice.css("color","#a94442"),DOM.notice.msgNotice.siblings(".right-mark").addClass("invisible"),!1)})}function s(){DOM.FORM.newPwd.blur(function(){var i=DOM.FORM.newPwd.val();return null==i||""==i?(DOM.notice.newPwdNotice.html("新密码不能为空"),DOM.notice.newPwdNotice.css("color","#a94442"),DOM.notice.newPwdNotice.siblings(".right-mark").addClass("invisible"),!1):i.length<6||i.length>15?(DOM.notice.newPwdNotice.html("密码字符长度应在6～15位"),DOM.notice.newPwdNotice.css("color","#a94442"),DOM.notice.newPwdNotice.siblings(".right-mark").addClass("invisible"),!1):a.isPassword(i)?(DOM.notice.newPwdNotice.html("密码必须是数字和字母的组合"),DOM.notice.newPwdNotice.css("color","#999999"),DOM.notice.newPwdNotice.siblings(".right-mark").removeClass("invisible"),void 0):(DOM.notice.newPwdNotice.html("密码必须是数字和字母的组合"),DOM.notice.newPwdNotice.css("color","#a94442"),DOM.notice.newPwdNotice.siblings(".right-mark").addClass("invisible"),!1)})}function l(){DOM.FORM.confirmPwd.blur(function(){var i=DOM.FORM.newPwd,e=DOM.FORM.confirmPwd;return i.val()!==e.val()?(DOM.notice.reConfirm.html("两次输入密码不一致"),DOM.notice.reConfirm.css("color","#a94442"),DOM.notice.reConfirm.siblings(".right-mark").addClass("invisible"),!1):void DOM.notice.reConfirm.siblings(".right-mark").removeClass("invisible")})}function r(i){var e=DOM.FORM.account.val();DOM.Module.regAccount.html(e),DOM.Btn.gotoIndex.html(i+"秒跳转到首页"),0==i?window.location.href="/index":(i-=1,setTimeout(function(){r(i)},1e3))}var a=i("common/module/util.js");o.exports={init:function(){t()}}});
;/*!/index/widget/view/index/index.js*/
define("index/widget/view/index/index",function(i,n,e){e.exports={init:function(){}}});
;/*!/index/widget/view/login/login.js*/
define("index/widget/view/login/login",function(e,n,i){function a(e){var n=g.FORM.username.val(),i=u.isUname(n),a=u.isNumber(n),s=u.isMobilePhone(n),t=n.length;if(n){if(!i&&!s)return a&&11!=t?(o("username","用户名为4-12位字母或数字，首字符不能为数字"),!1):s||11!=t?(o("username","请输入手机号码或4-12位用户名"),!1):(o("username","请输入正确的手机号码"),!1);if(i||s)return r("username",n),n}else if(e)return o("username","请输入用户名或11位手机号码"),n}function s(e){var n=g.FORM.pass.val(),i=(u.isNull(n),n.length);return n?6>i?(o("pass","密码为6-16位"),!1):(r("pass",n),n):e?(o("pass","请输入密码"),!1):void 0}function r(e,n,i){var a=i?i:f[e];g.TIPS[e].removeClass("red"),g.TIPS[e].html(a),g.PASS_MARKS[e].removeClass("invisible"),"pass"!=e&&(l[e]=!0,p[e]=n)}function o(e,n){g.TIPS[e].html(n),g.TIPS[e].addClass("red"),g.PASS_MARKS[e].addClass("invisible"),l[e]=!1,p[e]=""}function t(e){g.FORM[e].animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}var u=e("common/module/util.js"),m="/account/personalInfo";i.exports={init:function(e){e&&(m=e)}};var g={FORM:{username:$("#pageLogin-username"),pass:$("#pageLogin-pass"),remember:$("#pageLogin-remember")},TIPS:{},PASS_MARKS:{},BTNS:{submit:$("#pageLogin-submit")}},l={},p={};for(var c in g.FORM)g.TIPS[c]=g.FORM[c].siblings(".tip"),g.PASS_MARKS[c]=g.FORM[c].siblings(".right-mark"),l[c]=!1;var f={username:"请输入用户名或11位手机号码",pass:"请输入密码",code:"请输入验证码"};$("html body").on("click",".wrapper .pageLogin-content input",function(){var e=$(this),n=e.next(".right-mark");e.focus(),n.addClass("invisible")}),$("#pageLogin-pass").on("click",function(){$(this).val("")}),$("html body").on("blur",".wrapper .pageLogin-content #pageLogin-username",function(){a()}),$("html body").on("blur",".wrapper .pageLogin-content #pageLogin-pass",function(){s()});var d=$("#pageLogin-submit");d.click(function(){var e=a(1),n=s(1);e&&n?(d.html("正在登录..."),XDD.Request({url:"/index/do_login",data:{username:e,password:n},success:function(e){0==e.error_code?location.href=m:_alert(e.error_msg),d.html("登 录")},error:function(){d.html("登 录")}})):e?n||t("pass"):t("username")}),$(document).keyup(function(e){13==e.keyCode&&d.trigger("click")}),$("#pageLogin-pass").keydown(function(e){13==e.keyCode&&$("#pageLogin-submit").click()})});
;/*!/index/widget/view/reg/reg.js*/
define("index/widget/view/reg/reg",function(e,s,r){function t(){var e=1;g.FORM.code.blur(function(){var e=i();e&&(g.TIPS.code.html("正在检查邀请码..."),n("code",e,function(s){0==s.error_code?d("code",e,"邀请码可用"):(p("code","请联系箱典典官方客服400-969-6790获取邀请码"),v("code"))}))}),g.FORM.type.find(".radio-box").click(function(){var e=$(this);if(!e.hasClass("active")){e.addClass("active"),e.siblings(".radio-box").removeClass("active");var s=e.attr("type");g.FORM.type.attr("type",s)}}),g.FORM.username.blur(function(){var e=a();e&&(g.TIPS.username.html("正在检查用户名可用性..."),c("username",e,function(s){0==s.error_code?d("username",e,"用户名可用"):p("username","用户名已被注册（或不可用）")}))}),g.FORM.mobile.blur(function(){var e=o();e&&(g.TIPS.mobile.html("正在检查手机号可用性..."),c("mobile",e,function(s){0==s.error_code?d("mobile",e,"手机号可用"):p("mobile","手机号已被注册（或不可用）")}))}),g.FORM.mobile.keyup(function(e){var s=e.keyCode;37!=s&&38!=s&&39!=s&&40!=s&&g.FORM.mobile.val(g.FORM.mobile.val().replace(/\D/gi,""))}),g.BTNS.sms.click(function(){if(!g.BTNS.sms.hasClass("disable"))if(S.mobile)g.BTNS.sms.html("发送中..."),f(R.mobile);else{var e=o();e?(g.BTNS.sms.html("发送中..."),c("mobile",e,function(s){0==s.error_code?f(e):(g.BTNS.sms.html("发送短信"),p("mobile","手机号已被注册（或不可用）"),v("mobile"))})):v("mobile")}}),g.FORM.sms.blur(function(){m()}),g.FORM.pass.blur(function(){l()}),g.FORM.repass.blur(function(){u()}),g.BTNS.submit.click(function(){var s=i(1);if(s&&(g.TIPS.code.html("正在检查邀请码..."),n("code",s,function(r){0==r.error_code?(e=0,d("code",s,"邀请码可用"),console.log("status=",e)):(e=1,p("code","请联系箱典典官方客服400-969-6790获取邀请码"),v("code"))})),1!=e){var r=g.FORM.type.attr("type");if("freight_agent"!=r&&"carteam"!=r)return void p("type","请选择用户类型");d("type",r);var t={type:r},c=a(1);if(!c)return void v("username");t.userName=c;var f=o(1);if(!f)return void v("mobile");t.mobile=f;var b=m(1);if(!b)return void v("sms");t.smsCode=b;var S=l(1),R=u(1);if(!S)return void v("pass");if(!R)return void v("repass");if(t.pwd=R,!g.FORM.agreement[0].checked)return void _alert("请阅读并同意服务条款");g.BTNS.submit.html("正在注册..."),XDD.Request({url:"/user/do_register",data:t,success:function(e){0==e.error_code?location.href="/account/enterpriseInfo":(_alert(e.error_msg),g.BTNS.submit.html("立即注册"))},error:function(){g.BTNS.submit.html("立即注册")}})}})}function i(e){var s=g.FORM.code,r=s.val();return r?r:e?(v("code"),p("code","请联系箱典典官方客服400-969-6790获取邀请码"),!1):!1}function n(e,s,r){S[e]=!1,R[e]="",XDD.Request({type:"POST",url:"/user/checkregister",data:{register_code:s},success:function(e){"function"==typeof r&&r(e)}},!0)}function a(e){var s=g.FORM.username,r=s.val().replace(/\s{1,}/g,"").toLowerCase();return s.val(r),r?r.length<4?(p("username","用户名不少于4位"),!1):r.length>12?(p("username","用户名不多于12位"),!1):b.isUname(r)?r:(p("username","4-12位字母或数字，首字符不能为数字"),!1):e?(p("username","请输入用户名"),!1):!1}function o(e){var s=g.FORM.mobile,r=s.val();return r?11!==r.length?(p("mobile","请输入11位手机号"),!1):b.isMobilePhone(r)?r:(p("mobile","请输入正确的手机号"),!1):e?(p("mobile","请输入手机号"),!1):!1}function m(e){var s=g.FORM.sms,r=s.val();return r.length?4!==r.length?(p("sms","请输入4位短信验证码"),!1):b.isNumber(r)?(d("sms",r),r):(p("sms","短信验证码为4位数字"),!1):e?(p("sms","请输入短信验证码"),!1):!1}function l(e){var s=g.FORM.pass,r=s.val(),t=g.FORM.repass.val();return r.length?r.length<6||r.length>12?(p("pass","密码为6-16位"),!1):b.isPassword(r)?(t==r&&d("repass",t),d("pass",r),r):(p("pass","密码必须包含数字和字母"),!1):e?(p("pass","请输入密码"),!1):!1}function u(e){var s=g.FORM.repass,r=s.val(),t=g.FORM.pass.val();return r.length?r!==t?(p("repass","两次输入密码不一致"),!1):(d("repass",r),r):e?(p("repass","请再次输入密码"),!1):!1}function c(e,s,r){S[e]=!1,R[e]="",XDD.Request({type:"GET",url:"/index/checkExist",data:{mobileOrName:s},success:function(e){"function"==typeof r&&r(e)}})}function f(e){XDD.Request({type:"GET",url:"/user/sendSms",data:{mobile:e,smsType:"REGISTER"},success:function(e){if(0==e.error_code){_alert("已向您的手机发送了短信，请注意查收"),g.BTNS.sms.addClass("disable");var s=60,r=function(){1==s?(g.BTNS.sms.html("重发短信"),g.BTNS.sms.removeClass("disable"),clearTimeout(t)):(s--,g.BTNS.sms.html("重发("+s+")"),setTimeout(r,1e3))},t=setTimeout(r,1e3)}}})}function d(e,s,r){var t=r?r:T[e];g.TIPS[e].removeClass("red"),g.TIPS[e].html(t),g.PASS_MARKS[e].removeClass("invisible"),"pass"!=e&&(S[e]=!0,R[e]=s)}function p(e,s){g.TIPS[e].html(s),g.TIPS[e].addClass("red"),g.PASS_MARKS[e].addClass("invisible"),S[e]=!1,R[e]=""}function v(e){g.FORM[e].animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}var b=e("common/module/util.js"),g={FORM:{code:$("#reg-code"),type:$("#reg-type"),username:$("#reg-username"),mobile:$("#reg-mobile"),sms:$("#reg-sms"),pass:$("#reg-pass"),repass:$("#reg-repass"),agreement:$("#reg-agree")},TIPS:{},PASS_MARKS:{},BTNS:{sms:$("#get-sms"),submit:$("#reg-submit")}},S={},R={};for(var h in g.FORM)g.TIPS[h]=g.FORM[h].siblings(".tip"),g.PASS_MARKS[h]=g.FORM[h].siblings(".right-mark"),S[h]=!1;var T={type:"请选择用户类型",username:"4-12位字母或数字，首字符不能为数字",mobile:"可用于登录系统，找回密码",sms:"请查收手机短信，并填写短信中的验证码",pass:"6～16位字符，区分大小写",repass:"请再次输入密码"};r.exports={init:function(){t()}}});