define("index/widget/view/login/login",function(e,n,i){function a(e){var n=g.FORM.username.val(),i=u.isUname(n),a=u.isNumber(n),s=u.isMobilePhone(n),t=n.length;if(n){if(!i&&!s)return a&&11!=t?(o("username","用户名为4-12位字母或数字，首字符不能为数字"),!1):s||11!=t?(o("username","请输入手机号码或4-12位用户名"),!1):(o("username","请输入正确的手机号码"),!1);if(i||s)return r("username",n),n}else if(e)return o("username","请输入用户名或11位手机号码"),n}function s(e){var n=g.FORM.pass.val(),i=(u.isNull(n),n.length);return n?6>i?(o("pass","密码为6-16位"),!1):(r("pass",n),n):e?(o("pass","请输入密码"),!1):void 0}function r(e,n,i){var a=i?i:f[e];g.TIPS[e].removeClass("red"),g.TIPS[e].html(a),g.PASS_MARKS[e].removeClass("invisible"),"pass"!=e&&(l[e]=!0,p[e]=n)}function o(e,n){g.TIPS[e].html(n),g.TIPS[e].addClass("red"),g.PASS_MARKS[e].addClass("invisible"),l[e]=!1,p[e]=""}function t(e){g.FORM[e].animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}var u=e("common/module/util.js"),m="/account/personalInfo";i.exports={init:function(e){e&&(m=e)}};var g={FORM:{username:$("#pageLogin-username"),pass:$("#pageLogin-pass"),remember:$("#pageLogin-remember")},TIPS:{},PASS_MARKS:{},BTNS:{submit:$("#pageLogin-submit")}},l={},p={};for(var c in g.FORM)g.TIPS[c]=g.FORM[c].siblings(".tip"),g.PASS_MARKS[c]=g.FORM[c].siblings(".right-mark"),l[c]=!1;var f={username:"请输入用户名或11位手机号码",pass:"请输入密码",code:"请输入验证码"};$("html body").on("click",".wrapper .pageLogin-content input",function(){var e=$(this),n=e.next(".right-mark");e.focus(),n.addClass("invisible")}),$("#pageLogin-pass").on("click",function(){$(this).val("")}),$("html body").on("blur",".wrapper .pageLogin-content #pageLogin-username",function(){a()}),$("html body").on("blur",".wrapper .pageLogin-content #pageLogin-pass",function(){s()});var d=$("#pageLogin-submit");d.click(function(){var e=a(1),n=s(1);e&&n?(d.html("正在登录..."),XDD.Request({url:"/index/do_login",data:{username:e,password:n},success:function(e){0==e.error_code?location.href=m:_alert(e.error_msg),d.html("登 录")},error:function(){d.html("登 录")}})):e?n||t("pass"):t("username")}),$(document).keyup(function(e){13==e.keyCode&&d.trigger("click")}),$("#pageLogin-pass").keydown(function(e){13==e.keyCode&&$("#pageLogin-submit").click()})});