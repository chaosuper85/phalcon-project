define("index/widget/view/login/login",function(e,n,i){function a(e){var n=l.FORM.username.val(),i=m.isUname(n),a=m.isNumber(n),r=m.isMobilePhone(n),o=n.length;if(n){if(!i&&!r)return a&&11!=o?(t("username","用户名为4-12位字母或数字，首字符不能为数字"),!1):r||11!=o?(t("username","请输入手机号码或4-12位用户名"),!1):(t("username","请输入正确的手机号码"),!1);if(i||r)return s("username",n),n}else if(e)return t("username","请输入用户名或11位手机号码"),n}function r(e){var n=l.FORM.pass.val(),i=(m.isNull(n),n.length);return n?6>i?(t("pass","密码为6-16位"),!1):(s("pass",n),n):e?(t("pass","请输入密码"),!1):void 0}function s(e,n,i){var a=i?i:d[e];l.TIPS[e].removeClass("red"),l.TIPS[e].html(a),l.PASS_MARKS[e].removeClass("invisible"),"pass"!=e&&(c[e]=!0,g[e]=n)}function t(e,n){l.TIPS[e].html(n),l.TIPS[e].addClass("red"),l.PASS_MARKS[e].addClass("invisible"),c[e]=!1,g[e]=""}function o(e){l.FORM[e].animate({marginLeft:"-1px"},40).animate({marginLeft:"2px"},40).animate({marginLeft:"-2px"},40).animate({marginLeft:"1px"},40).animate({marginLeft:"0px"},40).focus()}var m=e("common/module/util.js"),u="/account/personalInfo";i.exports={init:function(e){e&&(u=e)}};var l={FORM:{username:$("#pageLogin-username"),pass:$("#pageLogin-pass"),remember:$("#pageLogin-remember")},TIPS:{},PASS_MARKS:{}},c={},g={};for(var p in l.FORM)l.TIPS[p]=l.FORM[p].siblings(".tip"),l.PASS_MARKS[p]=l.FORM[p].siblings(".right-mark"),c[p]=!1;var d={username:"请输入用户名或11位手机号码",pass:"请输入密码",code:"请输入验证码"};$("html body").on("click",".wrapper .pageLogin-content input",function(){var e=$(this),n=e.next(".right-mark");e.focus(),n.addClass("invisible")}),$("#pageLogin-pass").on("click",function(){$(this).val("")}),$("html body").on("blur",".wrapper .pageLogin-content #pageLogin-username",function(){a()}),$("html body").on("blur",".wrapper .pageLogin-content #pageLogin-pass",function(){r()});var f=$("#pageLogin-submit");f.click(function(){var e=a(1),n=r(1);e&&n?(f.html("正在登录..."),f.attr("disabled","disabled"),XDD.Request({url:"/index/do_login",data:{username:e,password:n},success:function(e){0==e.error_code?location.href=u:(_alert(e.error_msg),f.html("登 录"),f.removeAttr("disabled"))},error:function(){f.html("登 录"),f.removeAttr("disabled")}})):e?n||o("pass"):o("username")}),$(document).keyup(function(e){13==e.keyCode&&f.trigger("click")}),$("#pageLogin-pass").keydown(function(e){13==e.keyCode&&f.click()})});